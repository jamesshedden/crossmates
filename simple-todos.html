<head>
  <title>Crossmates</title>
</head>

<body>
  {{> imageView}}

  <div class="container">
    {{#if isAdmin}}
      {{#unless imageExists}}
        <form class="crossword-upload" action="">
          <input type="file" name="file" class="crossword-upload__input">
          <button type="submit">Upload</button>
        </form>
      {{/unless}}
    {{/if}}

    <header>
      {{> loginButtons}}

      {{#if currentUser}}
        <form class="new-task">
          <input type="text"
          class="new-task__input"
          name="text"
          placeholder="Clue suggestion e.g. 6A - Parsnips" />
        </form>
      {{/if}}
    </header>

    {{#each tasks}}
      {{> task}}
    {{/each}}
  </div>
</body>

<template name="task">
  <div class="task">
    <div class="task__suggestion">
      {{#if isAdmin}}
        <input type="checkbox"
        checked="{{checked}}"
        class="toggle-checked"/>
      {{/if}}

      <div class="task__suggestion-content">
        <span class="task__suggestion-text {{#if checked}}task__suggestion-text--checked{{/if}}">
          <strong>{{username}}</strong> - {{text}}
        </span>
      </div>

      <form class="suggestion-reply">
        <input type="text" name="reply" class="suggestion-reply__input">
      </form>

      {{#if isAdmin}}
        <button class="delete">âœ”</button>
      {{/if}}
    </div>

    <div class="task__replies is-hidden">
      {{#each replies}}
        <div class="task__reply">
          <strong>{{username}}</strong> - {{text}}
        </div>
      {{/each}}
    </div>
  </div>
</template>

<template name="imageView">
  {{#each images}}
    <img src="{{this.url}}" alt="" class="thumbnail {{#if isAdmin}}can-remove{{/if}}">
  {{/each}}
</template>
